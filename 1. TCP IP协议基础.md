## TCP/IP
### 一、简介
通常使用的网络（包括互联网）是在 TCP/IP 协议族的基础上运作的。而 **HTTP 属于它内部的一个子集。**
### 二、四层模型
1. 应用层
2. 传输层
3. 网络层
4. 数据链路层
#### 1. 应用层
应用层决定了向用户提供应用服务时通信的活动。<br>
TCP/IP 协议族内预存了各类通用的应用服务。比如，**FTP**（File Transfer Protocol，文件传输协议）和<br>
**DNS**（Domain Name System，域名系统）服务就是其中两类。
#### 2. 传输层
对上层应用层提供服务，提供处于网络通信中的两台计算机之间的数据传输服务<br>
在传输层有两个性质不同的协议：**TCP**（Transmission Control Protocol，**传输控制协议**）和 **UDP**（User Data Protocol，**用户数据报协议**）。
#### 3. 网络层
处理网络上的数据包，规定了包的传输路线，并将包发送给目标计算机
#### 4. 数据链路层
处理连接网络的硬件部分，包括控制操作系统、硬件的设备驱动、网卡等
### 三、TCP/IP通信数据流
![TCP/IP数据流](https://github.com/zenglinan/HTTP-note/blob/master/img/1.png)<br>
举个例子：<br>
客户端想看一个Web页面：
1. 在应用层（**HTTP** 协议）发出一个 HTTP 请求。
2. 在传输层（**TCP** 协议）把从应用层处收到的数据（HTTP 请求报文）进行分割，并在各个报文上打上标记序号及端口号后转发给网络层。
3. 在网络层（**IP** 协议），增加作为通信目的地的 MAC 地址后转发给链路层。这样一来，发往网络的通信请求就准备齐全了。
4. 接收端的服务器在链路层接收到数据，按序往上层发送，一直到应用层。当传输到应用层，才能算真正接收到由客户端发送过来的 HTTP请求。
注：**发送方在层层传输时会加上各层的首部信息，接收方会逐层剥离首部信息**
### 四、与HTTP协议密切相关的协议: IP、TCP、DNS
#### 1. IP协议
网络层的数据传输协议，作用是将数据包传输给对方。<br>
因此，要满足的两个重要条件：IP地址(**网络节点被分配到的地址**)、MAC地址(**网卡所属的硬件地址, 一般不会变**)<br>
**使用ARP协议解析出MAC地址, 依赖MAC地址进行中转通信**<br>
![](https://github.com/zenglinan/HTTP-note/blob/master/img/2.png)
#### 2. TCP协议
TCP 位于传输层，提供**可靠**的**字节流**服务.<br>
- 字节流: 将数据包**分割成以报文段为单位的数据包**
- 可靠: 采用三次握手确保数据成功送达到**发送方网络区域的路由器**
##### 三次握手
发送端发送一个带**SYN**标志的数据包给对方。(我发数据(标有SYN的包)给你了,收到了吗?)<br>
接收端收到后，回传一个带有 **SYN/ACK** 标志的数据包以示传达确认信息。(收到了(发送了SYN/ACK的数据包))<br>
发送端再回传一个带 **ACK** 标志的数据包，代表“握手”结束。(OK(发送标有ACK的数据包))<br>
![](https://github.com/zenglinan/HTTP-note/tree/master/img/3.png)
#### 3. DNS协议
DNS服务位于应用层, 作用是解析域名, 得到对应的IP地址<br>
用户通常通过域名来访问主机, 而不是IP, 因为IP不好记, 但对于计算机而言, 依旧是通过IP地址进行访问通信的.<br>
所以, 就需要DNS协议**通过域名查找IP地址**, 同时, DNS协议还可以通过IP反查找域名.<br>
![](https://github.com/zenglinan/HTTP-note/blob/master/img/4.png)<br>

po一张详细图解<br>
![](https://github.com/zenglinan/HTTP-note/blob/master/img/5.png)
